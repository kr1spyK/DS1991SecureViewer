<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_71) on Fri Mar 30 15:06:51 CDT 2018 -->
<title>SHAiButtonCopr (Maxim Integrated Products 1-Wire API  1.2)</title>
<meta name="date" content="2018-03-30">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="SHAiButtonCopr (Maxim Integrated Products 1-Wire API  1.2)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.dalsemi.onewire.application.sha</div>
<h2 title="Class SHAiButtonCopr" class="title">Class SHAiButtonCopr</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.dalsemi.onewire.application.sha.SHAiButtonCopr</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCoprVM.html" title="class in com.dalsemi.onewire.application.sha">SHAiButtonCoprVM</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">SHAiButtonCopr</span>
extends java.lang.Object</pre>
<div class="block"><P>Class for holding instances of SHA iButton Coprocessors involved in SHA
 Transactions.  The Coprocessor is used for digitally signing transaction
 data as well as generating random challenges for users and verifying
 their response.</P>

 <p>A DS1963S SHA iButton can be a <code>SHAiButtonCopr</code> or a
 <code>SHAiButtonUser</code>.  A Coprocessor iButton verifiessignatures
 and signs data for User iButtons.  A Coprocessor might be located
 inside a vending machine, where a person would bring their User iButton.  When
 the User iButton is pressed to the Blue Dot to perform a transaction, the Coprocessor
 would first verify that this button belongs to the system, i.e. that it knows the same
 authentication secret (example: a Visa terminal making sure the iButton had a Visa
 account installed). Then the Coprocessor would verify the signed data, probably money,
 to make sure it was valid.  If someone tried to overwrite the money file, even with a
 previously valid money file (an attempt to 'restore' a previous amount of money), the
 signed file would be invalid because the signature includes the write cycle counter,
 which is incremented every time a page is written to.  The write cycle counter is
 read-only and does not roll over, so the previous amount of money could not be restored
 by rolling the write counter. The Coprocessor verifies the money, then signs a new data
 file that contains the new amount of money. </p>

 <p>There are two secrets involved with the transaction process.  The first secret is
 the authentication secret.  It is used to validate a User iButton to a system.  The Coprocessor
 iButton has the system authentication secret installed.  On User iButtons, the
 system authentication secret is merged with binding data and the unique address
 of the User iButton to create a unique device authentication secret.  The second secret
 is a signing secret.  This secret only exists on the Coprocessor iButton, and is used
 to sign and verify transaction data (i.e. money).  These secrets are inaccessible outside the
 iButton.  Once they are installed, they cannot be retrieved.</p>

 <p>This class makes use of several performance enhancements for TINI.
 For instance, most methods are <code>synchronized</code> to access instance variable
 byte arrays rather than creating new byte arrays every time a transaction
 is performed.  This could hurt performance in multi-threaded
 applications, but the usefulness of having several threads contending
 to talk to a single iButton is questionable since the methods in
 <code>com.dalsemi.onewire.adapter.DSPortAdapter</code>
 <code>beginExclusive(boolean)</code> and <code>endExclusive()</code> should be used.</p></div>
<dl><dt><span class="strong">Version:</span></dt>
  <dd>1.00</dd>
<dt><span class="strong">Author:</span></dt>
  <dd>SKH</dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../com/dalsemi/onewire/application/sha/SHATransaction.html" title="class in com.dalsemi.onewire.application.sha"><code>SHATransaction</code></a>, 
<a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonUser.html" title="class in com.dalsemi.onewire.application.sha"><code>SHAiButtonUser</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#BIND_SECRET_FAILED">BIND_SECRET_FAILED</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#COPY_SCRATCHPAD_FAILED">COPY_SCRATCHPAD_FAILED</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#ERASE_SCRATCHPAD_FAILED">ERASE_SCRATCHPAD_FAILED</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#MATCH_SCRATCHPAD_FAILED">MATCH_SCRATCHPAD_FAILED</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#NO_ERROR">NO_ERROR</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#SHA_FUNCTION_FAILED">SHA_FUNCTION_FAILED</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#WRITE_DATA_PAGE_FAILED">WRITE_DATA_PAGE_FAILED</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#WRITE_SCRATCHPAD_FAILED">WRITE_SCRATCHPAD_FAILED</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#SHAiButtonCopr(com.dalsemi.onewire.container.OneWireContainer18,%20java.lang.String)">SHAiButtonCopr</a></strong>(<a href="../../../../../com/dalsemi/onewire/container/OneWireContainer18.html" title="class in com.dalsemi.onewire.container">OneWireContainer18</a>&nbsp;owc,
              java.lang.String&nbsp;coprFilename)</code>
<div class="block">Sets up this coprocessor object based on the contents of the file
 <code>coprFilename</code> stored on <code>owc</code>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#SHAiButtonCopr(com.dalsemi.onewire.container.OneWireContainer18,%20java.lang.String,%20boolean,%20int,%20int,%20int,%20int,%20int,%20byte,%20byte[],%20byte[],%20byte[],%20byte[],%20byte[],%20byte[],%20byte[],%20byte[],%20byte[])">SHAiButtonCopr</a></strong>(<a href="../../../../../com/dalsemi/onewire/container/OneWireContainer18.html" title="class in com.dalsemi.onewire.container">OneWireContainer18</a>&nbsp;l_owc,
              java.lang.String&nbsp;coprFilename,
              boolean&nbsp;l_formatDevice,
              int&nbsp;l_signPageNumber,
              int&nbsp;l_authPageNumber,
              int&nbsp;l_wspcPageNumber,
              int&nbsp;l_version,
              int&nbsp;l_encCode,
              byte&nbsp;l_serviceFileExt,
              byte[]&nbsp;l_serviceFilename,
              byte[]&nbsp;l_providerName,
              byte[]&nbsp;l_bindData,
              byte[]&nbsp;l_bindCode,
              byte[]&nbsp;l_auxData,
              byte[]&nbsp;l_initialSignature,
              byte[]&nbsp;l_signingChlg,
              byte[]&nbsp;l_signingSecret,
              byte[]&nbsp;l_authSecret)</code>
<div class="block">Sets up this coprocessor object based on the provided parameters
 and saves all of these parameters as the contents of the file
 <code>coprFilename</code> stored on <code>owc</code>.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#createDataSignature(byte[],%20byte[],%20byte[],%20int)">createDataSignature</a></strong>(byte[]&nbsp;accountData,
                   byte[]&nbsp;signScratchpad,
                   byte[]&nbsp;mac_buffer,
                   int&nbsp;macStart)</code>
<div class="block">Given a 32-byte array for page data and a 32-byte array for
 scratchpad content, this function will create a 20-byte signature
 for the data based on SHA-1.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#createDataSignatureAuth(byte[],%20byte[],%20byte[],%20int,%20byte[])">createDataSignatureAuth</a></strong>(byte[]&nbsp;accountData,
                       byte[]&nbsp;signScratchpad,
                       byte[]&nbsp;mac_buffer,
                       int&nbsp;macStart,
                       byte[]&nbsp;fullBindCode)</code>
<div class="block">Creates a data signature, but instead of using the signing secret,
 it uses the authentication secret, bound for a particular button.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#generateChallenge(int,%20byte[],%20int)">generateChallenge</a></strong>(int&nbsp;offset,
                 byte[]&nbsp;ch,
                 int&nbsp;start)</code>
<div class="block">Generates a 3 byte random challenge in the iButton, sufficient to be used
 as a challenge to be answered by a User iButton.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getAddress()">getAddress</a></strong>()</code>
<div class="block">Returns the 8 byte address of the OneWireContainer this
 SHAiButton refers to.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getAddress(byte[],%20int)">getAddress</a></strong>(byte[]&nbsp;data,
          int&nbsp;offset)</code>
<div class="block">Copies the 8 byte address of the OneWireContainer into
 the provided array starting at the given offset.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getAddress(byte[],%20int,%20int)">getAddress</a></strong>(byte[]&nbsp;data,
          int&nbsp;offset,
          int&nbsp;cnt)</code>
<div class="block">Copies the specified number of bytes from the address
 of the OneWireContainer into the provided array starting
 at the given offset.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getAuthenticationPageNumber()">getAuthenticationPageNumber</a></strong>()</code>
<div class="block">Returns the page number used by this coprocessor for storing
 system authentication secret and recreating user's authentication
 secret.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getAuxilliaryData()">getAuxilliaryData</a></strong>()</code>
<div class="block">Returns a string representing the auxilliary data associated
 with this coprocessor's service.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getBindCode()">getBindCode</a></strong>()</code>
<div class="block">Returns 7 byte binding code for finalizing secret installation
 on user buttons.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getBindCode(byte[],%20int)">getBindCode</a></strong>(byte[]&nbsp;data,
           int&nbsp;offset)</code>
<div class="block">Copies 7 byte binding code for finalizing secret installation
 on user buttons.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getBindData()">getBindData</a></strong>()</code>
<div class="block">Returns 32 byte binding data for finalizing secret installation
 on user buttons.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getBindData(byte[],%20int)">getBindData</a></strong>(byte[]&nbsp;data,
           int&nbsp;offset)</code>
<div class="block">Copies 32 byte binding data for finalizing secret installation
 on user buttons.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getEncryptionCode()">getEncryptionCode</a></strong>()</code>
<div class="block">Returns an integer representing the encryption code for
 this coprocessor.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getFilename(byte[],%20int)">getFilename</a></strong>(byte[]&nbsp;l_filename,
           int&nbsp;offset)</code>
<div class="block">Copies the filename (used for storing account data on user
 buttons) into the specified array starting at the specified
 offset.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>byte</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getFilenameExt()">getFilenameExt</a></strong>()</code>
<div class="block">Returns the extension of the filename used for storing account
 data on user buttons.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getInitialSignature()">getInitialSignature</a></strong>()</code>
<div class="block">Returns the 20-byte initial signature used by this coprocessor
 for signing account data.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getInitialSignature(byte[],%20int)">getInitialSignature</a></strong>(byte[]&nbsp;data,
                   int&nbsp;offset)</code>
<div class="block">Copies the 20-byte initial signature used by this coprocessor
 for signing account data into the specified array starting at the
 specified offset.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getLastError()">getLastError</a></strong>()</code>
<div class="block">Returns error code matching last error encountered by the
 coprocessor.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getProviderName()">getProviderName</a></strong>()</code>
<div class="block">Returns a string representing the Provider name associated
 with this coprocessor's service.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getSigningChallenge()">getSigningChallenge</a></strong>()</code>
<div class="block">Returns the 3-byte signing challenge used by this coprocessor
 for data validation.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getSigningChallenge(byte[],%20int)">getSigningChallenge</a></strong>(byte[]&nbsp;data,
                   int&nbsp;offset)</code>
<div class="block">Copies the 3-byte signing challenge used by this coprocessor
 for data validation into the specified array starting at
 the specified offset.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getSigningPageNumber()">getSigningPageNumber</a></strong>()</code>
<div class="block">Returns the page number used by this coprocessor for signing
 account data.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getVersion()">getVersion</a></strong>()</code>
<div class="block">Returns the version number of this service.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getWorkspacePageNumber()">getWorkspacePageNumber</a></strong>()</code>
<div class="block">Returns the page number used by this coprocessor for regenerating
 the user authentication.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#isDS1961Scompatible()">isDS1961Scompatible</a></strong>()</code>
<div class="block">Returns a boolean indicating whether or not this coprocessor's
 secret's were formatted for compatibility with the DS1961S.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#reformatFor1961S(byte[])">reformatFor1961S</a></strong>(byte[]&nbsp;auth_secret)</code>
<div class="block">Static method that reformats the inputted authentication secret
 so it is compatible with the DS1961S.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#toString()">toString</a></strong>()</code>
<div class="block">Returns a string representing the 1-Wire address of this SHAiButton.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#verifyAuthentication(byte[],%20byte[],%20byte[],%20byte[],%20byte)">verifyAuthentication</a></strong>(byte[]&nbsp;fullBindCode,
                    byte[]&nbsp;pageData,
                    byte[]&nbsp;scratchpad,
                    byte[]&nbsp;verify_mac,
                    byte&nbsp;authCmd)</code>
<div class="block">Determines if a <code>SHAiButtonUser</code> belongs to the system
 defined by this Coprocessor iButton.See the usage example in this
 class for initializing a Coprocessor iButton.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#verifySignature(byte[],%20byte[],%20byte[])">verifySignature</a></strong>(byte[]&nbsp;pageData,
               byte[]&nbsp;scratchpad,
               byte[]&nbsp;verify_mac)</code>
<div class="block">Verifies a User iButton's signed data on this Coprocessor iButton.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="NO_ERROR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NO_ERROR</h4>
<pre>public static final&nbsp;int NO_ERROR</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#com.dalsemi.onewire.application.sha.SHAiButtonCopr.NO_ERROR">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="WRITE_DATA_PAGE_FAILED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>WRITE_DATA_PAGE_FAILED</h4>
<pre>public static final&nbsp;int WRITE_DATA_PAGE_FAILED</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#com.dalsemi.onewire.application.sha.SHAiButtonCopr.WRITE_DATA_PAGE_FAILED">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="WRITE_SCRATCHPAD_FAILED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>WRITE_SCRATCHPAD_FAILED</h4>
<pre>public static final&nbsp;int WRITE_SCRATCHPAD_FAILED</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#com.dalsemi.onewire.application.sha.SHAiButtonCopr.WRITE_SCRATCHPAD_FAILED">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="MATCH_SCRATCHPAD_FAILED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MATCH_SCRATCHPAD_FAILED</h4>
<pre>public static final&nbsp;int MATCH_SCRATCHPAD_FAILED</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#com.dalsemi.onewire.application.sha.SHAiButtonCopr.MATCH_SCRATCHPAD_FAILED">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ERASE_SCRATCHPAD_FAILED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ERASE_SCRATCHPAD_FAILED</h4>
<pre>public static final&nbsp;int ERASE_SCRATCHPAD_FAILED</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#com.dalsemi.onewire.application.sha.SHAiButtonCopr.ERASE_SCRATCHPAD_FAILED">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="COPY_SCRATCHPAD_FAILED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>COPY_SCRATCHPAD_FAILED</h4>
<pre>public static final&nbsp;int COPY_SCRATCHPAD_FAILED</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#com.dalsemi.onewire.application.sha.SHAiButtonCopr.COPY_SCRATCHPAD_FAILED">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="SHA_FUNCTION_FAILED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SHA_FUNCTION_FAILED</h4>
<pre>public static final&nbsp;int SHA_FUNCTION_FAILED</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#com.dalsemi.onewire.application.sha.SHAiButtonCopr.SHA_FUNCTION_FAILED">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="BIND_SECRET_FAILED">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BIND_SECRET_FAILED</h4>
<pre>public static final&nbsp;int BIND_SECRET_FAILED</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#com.dalsemi.onewire.application.sha.SHAiButtonCopr.BIND_SECRET_FAILED">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="SHAiButtonCopr(com.dalsemi.onewire.container.OneWireContainer18, java.lang.String, boolean, int, int, int, int, int, byte, byte[], byte[], byte[], byte[], byte[], byte[], byte[], byte[], byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SHAiButtonCopr</h4>
<pre>public&nbsp;SHAiButtonCopr(<a href="../../../../../com/dalsemi/onewire/container/OneWireContainer18.html" title="class in com.dalsemi.onewire.container">OneWireContainer18</a>&nbsp;l_owc,
              java.lang.String&nbsp;coprFilename,
              boolean&nbsp;l_formatDevice,
              int&nbsp;l_signPageNumber,
              int&nbsp;l_authPageNumber,
              int&nbsp;l_wspcPageNumber,
              int&nbsp;l_version,
              int&nbsp;l_encCode,
              byte&nbsp;l_serviceFileExt,
              byte[]&nbsp;l_serviceFilename,
              byte[]&nbsp;l_providerName,
              byte[]&nbsp;l_bindData,
              byte[]&nbsp;l_bindCode,
              byte[]&nbsp;l_auxData,
              byte[]&nbsp;l_initialSignature,
              byte[]&nbsp;l_signingChlg,
              byte[]&nbsp;l_signingSecret,
              byte[]&nbsp;l_authSecret)
               throws <a href="../../../../../com/dalsemi/onewire/OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a>,
                      <a href="../../../../../com/dalsemi/onewire/adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a></pre>
<div class="block"><P>Sets up this coprocessor object based on the provided parameters
 and saves all of these parameters as the contents of the file
 <code>coprFilename</code> stored on <code>owc</code>.  Then, the
 system secret and authentication secret are installed on the
 coprocessor button.</P>

 <P>For the proper format of the coprocessor data file, see the
 document entitled "Implementing Secured D-Identification and E-Payment
 Applications using SHA iButtons".  For the format of TMEX file
 structures, see Application Note 114.</P></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>l_owc</code> - The DS1963S used as a coprocessor.</dd><dd><code>coprFilename</code> - The TMEX filename where coprocessor configuration
        data is stored.  Usually, "COPR.0".</dd><dd><code>l_formatDevice</code> - boolean indicating whether or not the TMEX
        filesystem of this device should be formatted before the
        coprocessor data file is stored.</dd><dd><code>l_signPageNumber</code> - page number used for signing user account data.
        (Should be page 8, but page 0 is acceptable if you don't need
        the TMEX directory structure)</dd><dd><code>l_authPageNumber</code> - page number used for recreating user secret.</dd><dd><code>l_wspcPageNumber</code> - page number used for storing user secret and
        recreating authentication MAC.</dd><dd><code>l_version</code> - version of the service provided by this coprocessor.</dd><dd><code>l_encCode</code> - refers to a type of encryption used for user account
        data stored on user buttons.</dd><dd><code>l_serviceFileExt</code> - the file extension used for the service file.
        (An extension of decimal 102 is reserved for Money files).</dd><dd><code>l_serviceFilename</code> - the 4-byte name of the user's account data
        file.</dd><dd><code>l_providerName</code> - the name of the provider of this service</dd><dd><code>l_bindData</code> - the binding data used to finalize secret installation
        on user buttons.</dd><dd><code>l_bindCode</code> - the binding code used to finalize secret installation
        on user buttons.</dd><dd><code>l_auxData</code> - any auxilliary or miscellaneous data to be stored on
        the coprocessor.</dd><dd><code>l_initialSignature</code> - the 20-byte initial MAC placed in user account
        data before generating actual MAC.</dd><dd><code>l_signingChlg</code> - the 3-byte challenge used for signing user
        account data.</dd><dd><code>l_signingSecret</code> - the system signing secret used by the
        service being installed on this coprocessor.</dd><dd><code>l_authSecret</code> - the system authentication secret used by the
        service being installed on this coprocessor.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../com/dalsemi/onewire/adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a></code> - on a 1-Wire communication error such as
         reading an incorrect CRC from a 1-Wire device.  This could be
         caused by a physical interruption in the 1-Wire Network due to
         shorts or a newly arriving 1-Wire device issuing a 'presence pulse'.</dd>
<dd><code><a href="../../../../../com/dalsemi/onewire/OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a></code> - on a communication or setup error with the 1-Wire
         adapter</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#SHAiButtonCopr(com.dalsemi.onewire.container.OneWireContainer18,%20java.lang.String)"><code>SHAiButtonCopr(OneWireContainer18,String)</code></a></dd></dl>
</li>
</ul>
<a name="SHAiButtonCopr(com.dalsemi.onewire.container.OneWireContainer18, java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SHAiButtonCopr</h4>
<pre>public&nbsp;SHAiButtonCopr(<a href="../../../../../com/dalsemi/onewire/container/OneWireContainer18.html" title="class in com.dalsemi.onewire.container">OneWireContainer18</a>&nbsp;owc,
              java.lang.String&nbsp;coprFilename)
               throws <a href="../../../../../com/dalsemi/onewire/OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a>,
                      <a href="../../../../../com/dalsemi/onewire/adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a></pre>
<div class="block"><P>Sets up this coprocessor object based on the contents of the file
 <code>coprFilename</code> stored on <code>owc</code>. This sets
 all the properties of the object as a consequence of what's in
 the coprocessor file.</P>

 <P>For the proper format of the coprocessor data file, see the
 document entitled "Implementing Secured D-Identification and E-Payment
 Applications using SHA iButtons".  For the format of TMEX file
 structures, see Application Note 114.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>owc</code> - The DS1963S used as a coprocessor</dd><dd><code>coprFilename</code> - The TMEX filename where coprocessor configuration
        data is stored.  Usually, "COPR.0".</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../com/dalsemi/onewire/adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a></code> - on a 1-Wire communication error such as
         reading an incorrect CRC from a 1-Wire device.  This could be
         caused by a physical interruption in the 1-Wire Network due to
         shorts or a newly arriving 1-Wire device issuing a 'presence pulse'.</dd>
<dd><code><a href="../../../../../com/dalsemi/onewire/OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a></code> - on a communication or setup error with the 1-Wire
         adapter</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#SHAiButtonCopr(com.dalsemi.onewire.container.OneWireContainer18,%20java.lang.String,%20boolean,%20int,%20int,%20int,%20int,%20int,%20byte,%20byte[],%20byte[],%20byte[],%20byte[],%20byte[],%20byte[],%20byte[],%20byte[],%20byte[])"><code>SHAiButtonCopr(OneWireContainer18,String,boolean,int,int,int,int,int,byte,byte[],byte[],byte[],byte[],byte[],byte[],byte[],byte[],byte[])</code></a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getAddress()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAddress</h4>
<pre>public&nbsp;byte[]&nbsp;getAddress()</pre>
<div class="block"><P>Returns the 8 byte address of the OneWireContainer this
 SHAiButton refers to.</P></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>8 byte array containing family code, address, and
         crc8 of the OneWire device.</dd></dl>
</li>
</ul>
<a name="getAddress(byte[], int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAddress</h4>
<pre>public&nbsp;void&nbsp;getAddress(byte[]&nbsp;data,
              int&nbsp;offset)</pre>
<div class="block"><P>Copies the 8 byte address of the OneWireContainer into
 the provided array starting at the given offset.</P></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>data</code> - array with at least 8 bytes after offset</dd><dd><code>offset</code> - the index at which copying starts</dd></dl>
</li>
</ul>
<a name="getAddress(byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAddress</h4>
<pre>public&nbsp;void&nbsp;getAddress(byte[]&nbsp;data,
              int&nbsp;offset,
              int&nbsp;cnt)</pre>
<div class="block"><P>Copies the specified number of bytes from the address
 of the OneWireContainer into the provided array starting
 at the given offset.</P></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>data</code> - array with at least cnt bytes after offset</dd><dd><code>offset</code> - the index at which copying starts</dd><dd><code>cnt</code> - the number of bytes to copy</dd></dl>
</li>
</ul>
<a name="getAuthenticationPageNumber()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAuthenticationPageNumber</h4>
<pre>public&nbsp;int&nbsp;getAuthenticationPageNumber()</pre>
<div class="block"><P>Returns the page number used by this coprocessor for storing
 system authentication secret and recreating user's authentication
 secret.  The authentication secret stays constant, while the new
 secret is copied on to the secret corresponding to the workspace
 page.</P></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>page number used for system authentication secret</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../com/dalsemi/onewire/container/OneWireContainer18.html#bindSecretToiButton(int,%20byte[],%20byte[],%20int)"><code>OneWireContainer18.bindSecretToiButton(int,byte[],byte[],int)</code></a></dd></dl>
</li>
</ul>
<a name="getAuxilliaryData()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAuxilliaryData</h4>
<pre>public&nbsp;java.lang.String&nbsp;getAuxilliaryData()</pre>
<div class="block"><P>Returns a string representing the auxilliary data associated
 with this coprocessor's service.</P></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the auxilliary data of this coprocessor's service</dd></dl>
</li>
</ul>
<a name="getBindCode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBindCode</h4>
<pre>public&nbsp;byte[]&nbsp;getBindCode()</pre>
<div class="block"><P>Returns 7 byte binding code for finalizing secret installation
 on user buttons.  This is copied into the user's scratchpad,
 along with 8 other bytes of binding data (see
 <code>bindSecretToiButton</code>) for finalizing the secret
 and making it unique to the button.</P></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the binding code for user's scratchpad</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../com/dalsemi/onewire/container/OneWireContainer18.html#bindSecretToiButton(int,%20byte[],%20byte[],%20int)"><code>OneWireContainer18.bindSecretToiButton(int,byte[],byte[],int)</code></a></dd></dl>
</li>
</ul>
<a name="getBindCode(byte[], int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBindCode</h4>
<pre>public&nbsp;void&nbsp;getBindCode(byte[]&nbsp;data,
               int&nbsp;offset)</pre>
<div class="block"><P>Copies 7 byte binding code for finalizing secret installation
 on user buttons.  This is copied into the user's scratchpad,
 along with 8 other bytes of binding data (see
 <code>bindSecretToiButton</code>) for finalizing the secret
 and making it unique to the button.</P></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>data</code> - array for copying the binding code for user's
        scratchpad</dd><dd><code>offset</code> - the index at which to start copying.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../com/dalsemi/onewire/container/OneWireContainer18.html#bindSecretToiButton(int,%20byte[],%20byte[],%20int)"><code>OneWireContainer18.bindSecretToiButton(int,byte[],byte[],int)</code></a></dd></dl>
</li>
</ul>
<a name="getBindData()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBindData</h4>
<pre>public&nbsp;byte[]&nbsp;getBindData()</pre>
<div class="block"><P>Returns 32 byte binding data for finalizing secret installation
 on user buttons.  This is copied into the user's account data
 page (see <code>bindSecretToiButton</code>) for finalizing the
 secret and making it unique to the button.</P></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the binding data for user's data page</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../com/dalsemi/onewire/container/OneWireContainer18.html#bindSecretToiButton(int,%20byte[],%20byte[],%20int)"><code>OneWireContainer18.bindSecretToiButton(int,byte[],byte[],int)</code></a></dd></dl>
</li>
</ul>
<a name="getBindData(byte[], int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBindData</h4>
<pre>public&nbsp;void&nbsp;getBindData(byte[]&nbsp;data,
               int&nbsp;offset)</pre>
<div class="block"><P>Copies 32 byte binding data for finalizing secret installation
 on user buttons.  This is then copied into the user's account data
 page (see <code>bindSecretToiButton</code>) for finalizing the
 secret and making it unique to the button.</P></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>data</code> - array for copying the binding data for user's
        data page</dd><dd><code>offset</code> - the index at which to start copying.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../com/dalsemi/onewire/container/OneWireContainer18.html#bindSecretToiButton(int,%20byte[],%20byte[],%20int)"><code>OneWireContainer18.bindSecretToiButton(int,byte[],byte[],int)</code></a></dd></dl>
</li>
</ul>
<a name="getEncryptionCode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEncryptionCode</h4>
<pre>public&nbsp;int&nbsp;getEncryptionCode()</pre>
<div class="block"><P>Returns an integer representing the encryption code for
 this coprocessor.  No handling of specific encryption codes
 are in place with this API, but could be added easily at
 the <code>SHATransaction</codE> layer.</P></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>an integer representing type of encryption for user data.</dd></dl>
</li>
</ul>
<a name="getFilename(byte[], int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFilename</h4>
<pre>public&nbsp;void&nbsp;getFilename(byte[]&nbsp;l_filename,
               int&nbsp;offset)</pre>
<div class="block"><P>Copies the filename (used for storing account data on user
 buttons) into the specified array starting at the specified
 offset.</P></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>l_filename</code> - the array into which the filename will be
        copied.</dd><dd><code>offset</code> - the starting index for copying the filename.</dd></dl>
</li>
</ul>
<a name="getFilenameExt()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFilenameExt</h4>
<pre>public&nbsp;byte&nbsp;getFilenameExt()</pre>
<div class="block"><P>Returns the extension of the filename used for storing account
 data on user buttons.  If the type of this service is an
 e-cash application, the file extension will be decimal 102.</P></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>proper file extension for user's account data file.</dd></dl>
</li>
</ul>
<a name="getInitialSignature()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInitialSignature</h4>
<pre>public&nbsp;byte[]&nbsp;getInitialSignature()</pre>
<div class="block"><P>Returns the 20-byte initial signature used by this coprocessor
 for signing account data.</P></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>20-byte initial signature.</dd></dl>
</li>
</ul>
<a name="getInitialSignature(byte[], int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInitialSignature</h4>
<pre>public&nbsp;void&nbsp;getInitialSignature(byte[]&nbsp;data,
                       int&nbsp;offset)</pre>
<div class="block"><P>Copies the 20-byte initial signature used by this coprocessor
 for signing account data into the specified array starting at the
 specified offset.</P></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>data</code> - arry for copying the 20-byte initial signature.</dd><dd><code>offset</code> - the index at which to start copying.</dd></dl>
</li>
</ul>
<a name="getLastError()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastError</h4>
<pre>public&nbsp;int&nbsp;getLastError()</pre>
<div class="block"><P>Returns error code matching last error encountered by the
 coprocessor.  An error code of zero implies NO_ERROR.</P></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the error code, zero for none.</dd></dl>
</li>
</ul>
<a name="getProviderName()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getProviderName</h4>
<pre>public&nbsp;java.lang.String&nbsp;getProviderName()</pre>
<div class="block"><P>Returns a string representing the Provider name associated
 with this coprocessor's service.</P></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the name of the provider's service.</dd></dl>
</li>
</ul>
<a name="getSigningChallenge()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSigningChallenge</h4>
<pre>public&nbsp;byte[]&nbsp;getSigningChallenge()</pre>
<div class="block"><P>Returns the 3-byte signing challenge used by this coprocessor
 for data validation.</P></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>3-byte challenge</dd></dl>
</li>
</ul>
<a name="getSigningChallenge(byte[], int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSigningChallenge</h4>
<pre>public&nbsp;void&nbsp;getSigningChallenge(byte[]&nbsp;data,
                       int&nbsp;offset)</pre>
<div class="block"><P>Copies the 3-byte signing challenge used by this coprocessor
 for data validation into the specified array starting at
 the specified offset.</P></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>data</code> - the array for copying the 3-byte challenge.</dd><dd><code>offset</code> - the index at which to start copying.</dd></dl>
</li>
</ul>
<a name="getSigningPageNumber()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSigningPageNumber</h4>
<pre>public&nbsp;int&nbsp;getSigningPageNumber()</pre>
<div class="block"><P>Returns the page number used by this coprocessor for signing
 account data.</P></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>page number used for signing</dd></dl>
</li>
</ul>
<a name="getVersion()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVersion</h4>
<pre>public&nbsp;int&nbsp;getVersion()</pre>
<div class="block"><P>Returns the version number of this service.</P></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>version number for service.</dd></dl>
</li>
</ul>
<a name="getWorkspacePageNumber()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getWorkspacePageNumber</h4>
<pre>public&nbsp;int&nbsp;getWorkspacePageNumber()</pre>
<div class="block"><P>Returns the page number used by this coprocessor for regenerating
 the user authentication.  This page is the target page for
 <code>bindSecretToiButton</code> when trying to reproduce a user's
 authentication secret.</P></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>page number used for regenerating user authentication.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../com/dalsemi/onewire/container/OneWireContainer18.html#bindSecretToiButton(int,%20byte[],%20byte[],%20int)"><code>OneWireContainer18.bindSecretToiButton(int,byte[],byte[],int)</code></a></dd></dl>
</li>
</ul>
<a name="isDS1961Scompatible()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isDS1961Scompatible</h4>
<pre>public&nbsp;boolean&nbsp;isDS1961Scompatible()</pre>
<div class="block"><P>Returns a boolean indicating whether or not this coprocessor's
 secret's were formatted for compatibility with the DS1961S.</P></div>
<dl><dt><span class="strong">Returns:</span></dt><dd><code>true</code> if this coprocessor can authenticate a
         DS1961S using it's system authentication secret.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#reformatFor1961S(byte[])"><code>reformatFor1961S(byte[])</code></a></dd></dl>
</li>
</ul>
<a name="createDataSignature(byte[], byte[], byte[], int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createDataSignature</h4>
<pre>public&nbsp;boolean&nbsp;createDataSignature(byte[]&nbsp;accountData,
                          byte[]&nbsp;signScratchpad,
                          byte[]&nbsp;mac_buffer,
                          int&nbsp;macStart)
                            throws <a href="../../../../../com/dalsemi/onewire/OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a>,
                                   <a href="../../../../../com/dalsemi/onewire/adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a></pre>
<div class="block"><P>Given a 32-byte array for page data and a 32-byte array for
 scratchpad content, this function will create a 20-byte signature
 for the data based on SHA-1.  The format of the calculation of the
 data signature is as follows: First 4-bytes of signing secret,
 32-bytes of accountData, 12 bytes of scratchpad data starting at
 index 8, last 4-bytes of signing secret, 3 bytes of scratchpad data
 starting at index 20, and the rest is padding as specified for
 standard SHA-1.  This is all laid out, in detail, in the DS1963S
 data sheet.</P>

 <P>The resulting 20-byte signature is copied into
 <code>mac_buffer</code> starting at <code>macStart</code>.  If you're
 updating a signature that already exists in the accountData array,
 it is acceptable to call the method like so:
 <code><pre>
   copr.createDataSignature(accountData, spad, accountData, 8);
 </pre></code>
 assuming that the signature starts at index 8 of the accountData
 array.</p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>accountData</code> - the 32-byte data page for which the signature is
        generated.</dd><dd><code>signScratchpad</code> - the 32-byte scratchpad contents for which the
        signature is generated.  This will contain parameters such
        as the user's write cycle counter for the page, the user's
        1-wire address, and the page number where account data is
        stored.</dd><dd><code>mac_buffer</code> - used to return the 20-byte signature generated
        by signing the page using the coprocessor's system signing
        secret.</dd><dd><code>macStart</code> - the offset into mac_buffer where copying should start.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if successful, <code>false</code> if an error
         occurred  (use <code>getLastError()</code> for more
         information on the type of error)</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../com/dalsemi/onewire/adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a></code> - on a 1-Wire communication error such as
         reading an incorrect CRC from a 1-Wire device.  This could be
         caused by a physical interruption in the 1-Wire Network due to
         shorts or a newly arriving 1-Wire device issuing a 'presence pulse'.</dd>
<dd><code><a href="../../../../../com/dalsemi/onewire/OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a></code> - on a communication or setup error with the 1-Wire
         adapter</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../com/dalsemi/onewire/container/OneWireContainer18.html#SHAFunction(byte,%20int)"><code>OneWireContainer18.SHAFunction(byte,int)</code></a>, 
<a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getLastError()"><code>getLastError()</code></a></dd></dl>
</li>
</ul>
<a name="createDataSignatureAuth(byte[], byte[], byte[], int, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createDataSignatureAuth</h4>
<pre>public&nbsp;boolean&nbsp;createDataSignatureAuth(byte[]&nbsp;accountData,
                              byte[]&nbsp;signScratchpad,
                              byte[]&nbsp;mac_buffer,
                              int&nbsp;macStart,
                              byte[]&nbsp;fullBindCode)
                                throws <a href="../../../../../com/dalsemi/onewire/OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a>,
                                       <a href="../../../../../com/dalsemi/onewire/adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a></pre>
<div class="block"><p>Creates a data signature, but instead of using the signing secret,
 it uses the authentication secret, bound for a particular button.</p>

 <P>fullBindCode can be null if the secret is already bound and in
 the signing page.</p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>accountData</code> - the 32-byte data page for which the signature is
        generated.</dd><dd><code>signScratchpad</code> - the 32-byte scratchpad contents for which the
        signature is generated.  This will contain parameters such
        as the user's write cycle counter for the page, the user's
        1-wire address, and the page number where account data is
        stored.</dd><dd><code>mac_buffer</code> - used to return the 20-byte signature generated
        by signing the page using the coprocessor's system signing
        secret.</dd><dd><code>macStart</code> - the offset into mac_buffer where copying should start.</dd><dd><code>fullBindCode</code> - used to recreate the user iButton's unique secret</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if successful, <code>false</code> if an error
         occurred  (use <code>getLastError()</code> for more
         information on the type of error)</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../com/dalsemi/onewire/adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a></code> - on a 1-Wire communication error such as
         reading an incorrect CRC from a 1-Wire device.  This could be
         caused by a physical interruption in the 1-Wire Network due to
         shorts or a newly arriving 1-Wire device issuing a 'presence pulse'.</dd>
<dd><code><a href="../../../../../com/dalsemi/onewire/OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a></code> - on a communication or setup error with the 1-Wire
         adapter</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../com/dalsemi/onewire/container/OneWireContainer18.html#SHAFunction(byte,%20int)"><code>OneWireContainer18.SHAFunction(byte,int)</code></a>, 
<a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#createDataSignature(byte[],%20byte[],%20byte[],%20int)"><code>createDataSignature(byte[],byte[],byte[],int)</code></a>, 
<a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getLastError()"><code>getLastError()</code></a></dd></dl>
</li>
</ul>
<a name="generateChallenge(int, byte[], int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateChallenge</h4>
<pre>public&nbsp;boolean&nbsp;generateChallenge(int&nbsp;offset,
                        byte[]&nbsp;ch,
                        int&nbsp;start)
                          throws <a href="../../../../../com/dalsemi/onewire/adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a>,
                                 <a href="../../../../../com/dalsemi/onewire/OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a></pre>
<div class="block"><p>Generates a 3 byte random challenge in the iButton, sufficient to be used
 as a challenge to be answered by a User iButton.  The user answers the challenge
 with an authenticated read of it's account data.</p>

 <p>The DS1963S will generate 20 bytes of pseudo random data, though only
 3 bytes are needed for the challenge.  Programs can add more 'randomness'
 by selecting different bytes from the 20 bytes of random data using the
 <code>offset</code> parameter.</p>

 <p>The random number generator is actually the DS1963S's SHA engine, which requires
 page data to compute a hash.  Select a page number with the <code>page_number</code>
 parameter.</p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>offset</code> - offset into the 20 random bytes to draw random data from
        (must be in range 0-16)</dd><dd><code>ch</code> - buffer for the challenge to be returned (must be of length 3 or more)</dd><dd><code>start</code> - the starting index into array <code>ch</code> to begin copying
        the challenge bytes.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if successful, <code>false</code> if an error
         occurred  (use <code>getLastError()</code> for more
         information on the type of error)</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../com/dalsemi/onewire/adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a></code> - on a 1-Wire communication error such as
         reading an incorrect CRC from a 1-Wire device.  This could be
         caused by a physical interruption in the 1-Wire Network due to
         shorts or a newly arriving 1-Wire device issuing a 'presence pulse'.</dd>
<dd><code><a href="../../../../../com/dalsemi/onewire/OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a></code> - on a communication or setup error with the 1-Wire
         adapter</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonUser.html#readAccountData(byte[],%20int,%20byte[],%20int,%20byte[],%20int)"><code>SHAiButtonUser.readAccountData(byte[],int,byte[],int,byte[],int)</code></a>, 
<a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getLastError()"><code>getLastError()</code></a></dd></dl>
</li>
</ul>
<a name="verifyAuthentication(byte[], byte[], byte[], byte[], byte)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verifyAuthentication</h4>
<pre>public&nbsp;boolean&nbsp;verifyAuthentication(byte[]&nbsp;fullBindCode,
                           byte[]&nbsp;pageData,
                           byte[]&nbsp;scratchpad,
                           byte[]&nbsp;verify_mac,
                           byte&nbsp;authCmd)
                             throws <a href="../../../../../com/dalsemi/onewire/adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a>,
                                    <a href="../../../../../com/dalsemi/onewire/OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a></pre>
<div class="block"><p>Determines if a <code>SHAiButtonUser</code> belongs to the system
 defined by this Coprocessor iButton.See the usage example in this
 class for initializing a Coprocessor iButton.</p>

 <p>The first step in user authentication is to recreate the user's
 unique secret on the coprocessor button using
 <code>bindSecretToiButton(int,byte[],byte[],int)</code>.  Then the
 coprocessor signs the pageData to produce a MAC.  If the MAC matches
 that produced by the user, the user belongs to the system.</p>

 <p>The TMEX formatted page with the user's account data is in the
 32-byte parameter <code>pageData</code>.  If the verification
 is successful, the data data signature must still be verified with
 the <code>verifySignature()</code> method.</p>

 <p>Failure of this method does not necessarily mean that
 the User iButton does not belong to the system.  It is possible that
 a communication disruption here could cause a CRC error that
 would be indistinguishable from a failed authentication.  However,
 repeated attempts should reveal whether it was truly a communication
 problem or a User iButton that does not belong to the system.</p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>fullBindCode</code> - 15-byte binding code used to recreate user iButtons
        unique secret in the coprocessor.</dd><dd><code>pageData</code> - 32-byte buffer containing the data page holding the user's
        account data.</dd><dd><code>scratchpad</code> - the 32-byte scratchpad contents for which the
        signature is generated.  This will contain parameters such
        as the user's write cycle counter for the page, the user's
        1-wire address, and the page number where account data is
        stored.</dd><dd><code>verify_mac</code> - the 20-byte buffer containing the user's authentication
        response to the coprocessor's challenge.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if the operation was successful and the user's
         MAC matches that generated by the coprocessor.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../com/dalsemi/onewire/adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a></code> - on a 1-Wire communication error such as
         reading an incorrect CRC from a 1-Wire device.  This could be
         caused by a physical interruption in the 1-Wire Network due to
         shorts or a newly arriving 1-Wire device issuing a 'presence pulse'.</dd>
<dd><code><a href="../../../../../com/dalsemi/onewire/OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a></code> - on a communication or setup error with the 1-Wire
         adapter</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#generateChallenge(int,%20byte[],%20int)"><code>generateChallenge(int,byte[],int)</code></a>, 
<a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#verifySignature(byte[],%20byte[],%20byte[])"><code>verifySignature(byte[],byte[],byte[])</code></a>, 
<a href="../../../../../com/dalsemi/onewire/container/OneWireContainer18.html#bindSecretToiButton(int,%20byte[],%20byte[],%20int)"><code>OneWireContainer18.bindSecretToiButton(int,byte[],byte[],int)</code></a>, 
<a href="../../../../../com/dalsemi/onewire/container/OneWireContainer18.html#SHAFunction(byte,%20int)"><code>OneWireContainer18.SHAFunction(byte,int)</code></a>, 
<a href="../../../../../com/dalsemi/onewire/container/OneWireContainer18.html#matchScratchPad(byte[])"><code>OneWireContainer18.matchScratchPad(byte[])</code></a>, 
<a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getLastError()"><code>getLastError()</code></a></dd></dl>
</li>
</ul>
<a name="verifySignature(byte[], byte[], byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verifySignature</h4>
<pre>public&nbsp;boolean&nbsp;verifySignature(byte[]&nbsp;pageData,
                      byte[]&nbsp;scratchpad,
                      byte[]&nbsp;verify_mac)
                        throws <a href="../../../../../com/dalsemi/onewire/adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a>,
                               <a href="../../../../../com/dalsemi/onewire/OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a></pre>
<div class="block"><P>Verifies a User iButton's signed data on this Coprocessor iButton.
 The Coprocessor must recreate the signature based on the data in the
 file and the contents of the given scratchpad, and then match that
 with the signature passed in verify_mac.</P></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>pageData</code> - the full 32 byte TMEX file from the User iButton
        (from <code>verifyAuthentication</code>) with the</dd><dd><code>scratchpad</code> - the 32-byte scratchpad contents for which the
        signature is generated.  This will contain parameters such
        as the user's write cycle counter for the page, the user's
        1-wire address, and the page number where account data is
        stored.</dd><dd><code>verify_mac</code> - the 20-byte buffer containing the signature the user
        had stored with the account data file.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true<code> if the data file is valid, <code>false</code>
         if an error occurred (use <code>getLastError()</code> for more
         information on the type of error)</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../com/dalsemi/onewire/adapter/OneWireIOException.html" title="class in com.dalsemi.onewire.adapter">OneWireIOException</a></code> - on a 1-Wire communication error such as
         reading an incorrect CRC from a 1-Wire device.  This could be
         caused by a physical interruption in the 1-Wire Network due to
         shorts or a newly arriving 1-Wire device issuing a 'presence pulse'.</dd>
<dd><code><a href="../../../../../com/dalsemi/onewire/OneWireException.html" title="class in com.dalsemi.onewire">OneWireException</a></code> - on a communication or setup error with the 1-Wire
         adapter</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#verifyAuthentication(byte[],%20byte[],%20byte[],%20byte[],%20byte)"><code>verifyAuthentication(byte[],byte[],byte[],byte[],byte)</code></a>, 
<a href="../../../../../com/dalsemi/onewire/application/sha/SHAiButtonCopr.html#getLastError()"><code>getLastError()</code></a></dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;java.lang.String&nbsp;toString()</pre>
<div class="block">Returns a string representing the 1-Wire address of this SHAiButton.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>a string containing the 8-byte address of this 1-Wire device.</dd></dl>
</li>
</ul>
<a name="reformatFor1961S(byte[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>reformatFor1961S</h4>
<pre>public static&nbsp;byte[]&nbsp;reformatFor1961S(byte[]&nbsp;auth_secret)</pre>
<div class="block"><P>Static method that reformats the inputted authentication secret
 so it is compatible with the DS1961S.  This means that for every
 group of 47 bytes in the secret, bytes at indices 32-35 and indices
 44-46 are all set to 0xFF.  Check the format for secret generation
 in the DS1961S data sheet to verify format of digest buffer.</P>

 <P>Note that if a coprocessor button uses this formatted secret,
 this function should be called for all user buttons including the
 DS1963S and DS1961S to ensure compatibility</P></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>auth_secret</code> - the authentication secret to be reformatted.</dd>
<dt><span class="strong">Returns:</span></dt><dd>a reformatted authentication secret, with the appropriate
         padding for DS1961S interaction.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<p class="legalCopy"><small><i>Copyright &#169; 1999-2012 Maxim Integrated Products. All Rights Reserved.</i></small></p>
</body>
</html>
